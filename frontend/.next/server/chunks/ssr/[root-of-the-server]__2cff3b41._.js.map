{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/NOTES/url/frontend/src/pages/secret/%5BsecretId%5D.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nconst BACKEND_URL =\r\n  process.env.NEXT_PUBLIC_BACKEND_URL || \"http://localhost:3000\";\r\n\r\nexport default function SecretViewer() {\r\n  const router = useRouter();\r\n  const { secretId } = router.query;\r\n  const [secret, setSecret] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [requiresPassword, setRequiresPassword] = useState(false);\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!secretId) return;\r\n    fetch(`${BACKEND_URL}/secret/${secretId}`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.content) {\r\n          setSecret(data.content);\r\n        } else if (data.requiresPassword) {\r\n          setRequiresPassword(true);\r\n        } else {\r\n          setError(\r\n            data.error ||\r\n              data.message ||\r\n              \"Secret not found or already accessed.\"\r\n          );\r\n        }\r\n        setLoading(false);\r\n      });\r\n  }, [secretId]);\r\n\r\n  const handlePasswordSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(\"\");\r\n    fetch(\r\n      `${BACKEND_URL}/secret/${secretId}?password=${encodeURIComponent(\r\n        password\r\n      )}`\r\n    )\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        if (data.content) {\r\n          setSecret(data.content);\r\n          setRequiresPassword(false);\r\n        } else {\r\n          setError(\r\n            data.error ||\r\n              data.message ||\r\n              \"Invalid password or secret not found.\"\r\n          );\r\n        }\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  const handleCopy = () => {\r\n    if (secret) {\r\n      navigator.clipboard.writeText(secret);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p className=\"text-center text-white\">Loading...</p>;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-900 flex items-center justify-center p-4\">\r\n      <div className=\"bg-gray-800 text-white p-6 rounded-lg shadow-xl max-w-xl w-full\">\r\n        <h2 className=\"text-2xl font-bold mb-4\">üîê Secret</h2>\r\n        {requiresPassword ? (\r\n          <form onSubmit={handlePasswordSubmit} className=\"space-y-4\">\r\n            <label className=\"block text-sm font-medium\">\r\n              Password Required\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              className=\"w-full p-3 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n              placeholder=\"Enter password to view secret\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full py-3 bg-purple-600 hover:bg-purple-700 rounded-md font-semibold transition\"\r\n            >\r\n              View Secret\r\n            </button>\r\n            {error && <p className=\"text-red-400\">{error}</p>}\r\n          </form>\r\n        ) : error ? (\r\n          <p className=\"text-red-400\">{error}</p>\r\n        ) : (\r\n          <>\r\n            <pre className=\"bg-gray-700 p-4 rounded text-lg break-words\">\r\n              {secret}\r\n            </pre>\r\n            <p className=\"mt-4 text-sm text-gray-300\">\r\n              ‚úÖ This secret has now been deleted and cannot be viewed again.\r\n            </p>\r\n            <button\r\n              className=\"mt-4 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded\"\r\n              onClick={handleCopy}\r\n            >\r\n              üìã {copied ? \"Copied!\" : \"Copy to Clipboard\"}\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAEA,MAAM,cACJ,QAAQ,GAAG,CAAC,uBAAuB,IAAI;AAE1B,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,uHAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,QAAQ,EAAE,GAAG,OAAO,KAAK;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAiB;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IACzD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,mGAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,CAAA,GAAA,mGAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,UAAU;QACf,MAAM,GAAG,YAAY,QAAQ,EAAE,UAAU,EACtC,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,IACtB,IAAI,CAAC,CAAC;YACL,IAAI,KAAK,OAAO,EAAE;gBAChB,UAAU,KAAK,OAAO;YACxB,OAAO,IAAI,KAAK,gBAAgB,EAAE;gBAChC,oBAAoB;YACtB,OAAO;gBACL,SACE,KAAK,KAAK,IACR,KAAK,OAAO,IACZ;YAEN;YACA,WAAW;QACb;IACJ,GAAG;QAAC;KAAS;IAEb,MAAM,uBAAuB,OAAO;QAClC,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QACT,MACE,GAAG,YAAY,QAAQ,EAAE,SAAS,UAAU,EAAE,mBAC5C,WACC,EAEF,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,IACtB,IAAI,CAAC,CAAC;YACL,IAAI,KAAK,OAAO,EAAE;gBAChB,UAAU,KAAK,OAAO;gBACtB,oBAAoB;YACtB,OAAO;gBACL,SACE,KAAK,KAAK,IACR,KAAK,OAAO,IACZ;YAEN;YACA,WAAW;QACb;IACJ;IAEA,MAAM,aAAa;QACjB,IAAI,QAAQ;YACV,UAAU,SAAS,CAAC,SAAS,CAAC;YAC9B,UAAU;YACV,WAAW,IAAM,UAAU,QAAQ;QACrC;IACF;IAEA,IAAI,SAAS,qBAAO,qKAAC;QAAE,WAAU;kBAAyB;;;;;;IAE1D,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAI,WAAU;;8BACb,qKAAC;oBAAG,WAAU;8BAA0B;;;;;;gBACvC,iCACC,qKAAC;oBAAK,UAAU;oBAAsB,WAAU;;sCAC9C,qKAAC;4BAAM,WAAU;sCAA4B;;;;;;sCAG7C,qKAAC;4BACC,MAAK;4BACL,WAAU;4BACV,aAAY;4BACZ,OAAO;4BACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;4BAC3C,QAAQ;;;;;;sCAEV,qKAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;wBAGA,uBAAS,qKAAC;4BAAE,WAAU;sCAAgB;;;;;;;;;;;2BAEvC,sBACF,qKAAC;oBAAE,WAAU;8BAAgB;;;;;yCAE7B;;sCACE,qKAAC;4BAAI,WAAU;sCACZ;;;;;;sCAEH,qKAAC;4BAAE,WAAU;sCAA6B;;;;;;sCAG1C,qKAAC;4BACC,WAAU;4BACV,SAAS;;gCACV;gCACK,SAAS,YAAY;;;;;;;;;;;;;;;;;;;;AAOvC","debugId":null}}]
}